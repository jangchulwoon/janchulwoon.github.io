<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.101.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>item07 결과 부족이 발생할 경우 null과 Failure를 사용하라&nbsp;&ndash;&nbsp;Ors</title><link rel="stylesheet" href="/css/core.min.9e958365cf0319ede466a402e1369f31dc1f205c868aa836fe25581725c829d3f3545d9f142cccafe35363950a63e2a6.css" integrity="sha384-npWDZc8DGe3kZqQC4TafMdwfIFyGiqg2/iVYFyXIKdPzVF2fFCzMr&#43;NTY5UKY&#43;Km"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="item07 결과 부족이 발생할 경우 null과 Failure를 사용하라" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">Ors</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a></nav></div></span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">item07 결과 부족이 발생할 경우 null과 Failure를 사용하라</h1><p class="article date">Friday, August 12, 2022<span class="reading-time"> • One minute to read</span></p></section><article class="article markdown-body"><p>함수가 원하는 결과를 만들어 낼 수 없을때, 2가지 방법을 사용 할 수 있습니다.</p>
<ol>
<li>null 또는 실패를 나타내는 sealed class 를 리턴한다.</li>
<li>예외를 throw 한다.</li>
</ol>
<p>2번째 방법인 예외는 정보를 전달하는 방법으로 사용해서는 안되며, 잘못된 특별한 상황을 나타내도록 처리해야합니다.</p>
<p>예외는 많은 개발자가 예외 전파되는 과정을 제대로 추적하기 어렵습니다. 또한 kotlin 의 모든 예외는 unchecked 이므로, 사용자가 예외를 처리하지 않을 수 있습니다.
마지막으로 try-catch 블록 내부에 코드를 배치하면, 컴파일러가 할 수 있는 최적화가 제한됩니다.</p>
<p>반면, null 과 sealed class (Failure)는 예상되는 오류를 표현할때 굉장히 좋습니다.</p>
<blockquote>
<p>method 를 사용하는 사람에, 실패 상황을 명시적으로 표현할 수 있습니다.</p>
</blockquote>
<p>따라서 충분히 예측할 수 있는 범위의 오류는 Null 과 Failure 를 사용하고, 예측하기 어려운 상황에 대해서는 throw 를 처리하는 것이 좋습니다.</p>
<p>추가적인 정보를 전달해야 할 경우 Failure 를 사용하며 그렇지 않으면 null 을 사용하는 것이 일반적입니다.</p>
<p>만약 null 을 사용한다고하면, getOrNull 과 같은 무엇이 리턴되는지 예측할 수 있게 하는 것이 좋습니다.</p>
<h4 id="추가적으로-">추가적으로 ..</h4>
<p>Kotlin 은 Result 라는 class 를 제공하는데, 결과를 캡슐화하여, 다른 곳에서 처리할 수 있도록하는 class 입니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="line"><span class="cl"><span class="k">fun</span> <span class="nf">getApi</span><span class="p">():</span> <span class="n">Result</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">Exception</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Result</span><span class="p">.</span><span class="n">failure</span><span class="p">(</span><span class="n">Exception</span><span class="p">(</span><span class="s2">&#34;text&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// method 호출부에서 exception 처리가 가능
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">val</span> <span class="py">response</span> <span class="p">=</span> <span class="n">getApi</span><span class="p">().</span><span class="n">getOrElse</span> <span class="p">{</span> <span class="s2">&#34;default&#34;</span> <span class="p">}</span>
</span></span></code></pre></div><p>Result 를 사용 시, 비즈니스 로직과 관련된 예외 처리를 infra 가 아닌 service layer 에서 (쉽게) 진행 할 수 있습니다.</p>
</article><section class="article labels"><a class="category" href=/categories/kotlin/>kotlin</a><a class="tag" href=/tags/kotlin/>kotlin</a><a class="tag" href=/tags/effective/>effective</a></section>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/posts/kotlin/effective/item-08/"><span class="iconfont icon-article"></span>item08 적절하게 null을 처리하라</a></p><p><a class="link" href="/posts/kotlin/effective/item-06/"><span class="iconfont icon-article"></span>item06 사용자 정의 오류보다는 표준 오류를 사용하라.</a></p></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2019 Notepadium.</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a></p></div>
</section></body>

</html>